## Database > RDS for MS-SQL > バックアップおよび復元

## バックアップ

DBインスタンスのデータベースを復旧できるように、事前に準備できます。RDS for MS-SQLは、データベースごとに順次バックアップを行います。
任意のタイミングで手動でバックアップを作成したり、バックアップ保管期間を設定して自動的にバックアップを作成できます。
手動で作成したバックアップを利用して特定時刻へ復元したり、バックアップ保管期間中の任意の時点へ復元ができます。

> [注意]
> バックアップの実行中は、バックアップによる性能の低下が発生する場合があります。
> サービスに影響を与えないよう、サービスの負荷が小さい時間にバックアップを行うことを推奨します。

### バックアップストレージ

RDS for SQL Serverは、すべてのバックアップファイルを別のオブジェクトストレージに保存します。
自動バックアップファイルは、DBインスタンスを削除すると全て削除され、手動バックアップファイルはユーザーが削除しない限りオブジェクトストレージに永続的に保存されます。

### 自動バックアップ

DBインスタンスのバックアップ保管期間を1日以上に設定すると、自動バックアップが有効になり、指定されたバックアップ実行時間に自動バックアップが行われます。バックアップ実行時間を指定しない場合は、毎日負荷が集中しない任意の時点で自動バックアップを実行します。バックアップ実行時間を指定すると、指定された時刻から15分の間に自動バックアップを実行します。自動バックアップは最大30日まで保管できます。バックアップ保管期間をなしに設定すると、自動バックアップが無効になり、保存されたすべての自動バックアップファイルがバックアップストレージから削除されます。自動バックアップが無効になると、バックアップ保管期間中の任意の時点へ復元ができなくなりますが、手動バックアップを利用して特定時刻への復元は可能です。

> [注意]
> 自動バックアップを有効にした場合、データベースの復旧モデルは`全体(Full)`にする必要があります。
> `単純(Simple)`および`大量ログ(Bulk logged)`モデルを使用する場合、バックアップおよび復元の正常な動作を保障しません。

### 手動バックアップ

自動バックアップが有効になっているかどうかに関係なく、任意の時刻に手動でバックアップを実行できます。手動でバックアップ作成時、名前を入力する必要があります。命名ルールは次のとおりです。

* バックアップ名はリージョンごとに固有の名前にする必要があります。
* バックアップ名は4～100文字まで入力可能で、英数字、(-)(_)(.)のみ使用可能です。
* バックアップ名の最初の文字は英字のみ使用できます。

## 復元

RDS for MS-SQLは、バックアップファイルを利用してバックアップされた瞬間に復元したり、復元したい任意の時点を選択して復元を行うことができます。復元を行うと、既存DBインスタンスと関係がない新規DBインスタンスが作成されます。復元されたDBインスタンスはデータベースのみ復元されるため、パラメータグループとセキュリティグループを新たに設定する必要があります。新しいパラメータグループを設定することはできますが、バックアップした時のパラメータグループを使用して復元することを推奨します。

### バックアップを利用した復元

手動または自動バックアップを利用してDBインスタンスを復元できます。復元にかかる時間はバックアップのサイズによって異なり、数分から数十分かかります。
復元するDBインスタンスのタイプとパラメータグループは、バックアップした時点のDBインスタンスと同じ設定にすることを推奨します。

> [注意]
> DBインスタンスに複数のデータベースが存在し、各データベースのサイズが大きい場合、バックアップ実行時刻に差が生じる場合があります。
> データベースごとに順次バックアップが行われるため、バックアップを実行した時刻にすべてのデータベースが復元されることを保障しません。 

### バックアップ保管期間中の任意の時点に復元

DBインスタンスの自動バックアップが有効になっている場合、保管期間中の任意の時点へ復元可能です。時点復元を行うには別途、ログバックアップが必要です。RDS for MS-SQLは、5分毎に自動的にログバックアップを実行した後、バックアップストレージに保存します。自動バックアップを有効にした時刻から、最後にログバックアップを保存した時点まで、復元可能です。
自動バックアップが有効になっている場合、5分毎にユーザーが作成したデータベースを検知して全体バックアップを別途実行します。したがってデータベース作成直後の時点に復元した時、新規で作成したデータベースは正常に復元されません。他の作業を行っていない安定的なDBインスタンスを基準に、作成時点から少なくとも5分以降の時点を選択する必要があります。   
